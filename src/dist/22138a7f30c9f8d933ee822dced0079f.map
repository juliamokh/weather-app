{"version":3,"sources":["components/LocationSearch.js","app.js"],"names":["LocationSearch","state","isValid","host","document","getElementById","addEventListener","handleSubmit","e","preventDefault","city","target","elements","search","value","trim","length","updateState","render","innerHTML","console","log","window","onload","form","api","baseUrl","key","days","units","endpoint","dom","star","todayForecast","weekForecast","favorite","recent","app","data","query","getUnits","getInput","input","getForecast","fetch","then","handleErrors","response","processData","catch","err","ok","Error","statusText","json","forecast","renderDayForecast","renderWeekForecast","history","addToRecent","renderRecent","link","changeLink","listenStar","addToFavorite","renderFavorite","listenDay","className","day","id","parentNode","listenCity","list","tagName","textContent","listenLink","listenInput","keyCode","isInputEmpty","classList","add","html","city_name","country_code","getWeekday","datetime","wind_spd","getSpeedUnits","rh","drawIcon","weather","code","description","min_temp","max_temp","temp","insertAdjacentHTML","i","getShortWeekday","weekday","date","Date","getDay","weatherCode","icon","isCelciusSelected","options","selectedIndex","recentCities","localStorage","getItem","JSON","parse","favoriteCities","arr","addToArray","setItem","stringify","renderList","parent","forEach","item","parentElement","push","Set","shift","pushState","popLink","getLink","location","substring"],"mappings":"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","file":"22138a7f30c9f8d933ee822dced0079f.map","sourcesContent":["class LocationSearch {\n  constructor() {\n    this.state = {\n      isValid : true,\n    };\n    this.host = document.getElementById('search-bar-container');\n    this.host.addEventListener('submit', this.handleSubmit);\n  }\n\n  handleSubmit(e) {\n    e.preventDefault();\n    const city = e.target.elements.search.value.trim();\n    if (city.length) {\n\n    }\n    else {\n      this.updateState({isValid : false});\n    }\n  }\n\n  updateState(state) {\n    this.state = state;\n    this.render();\n  }\n\n  render() {\n    this.host.innerHTML = `\n    <form class=\"search-bar\">\n      <button class=\"btn-star\" id=\"star\" type=\"button\" ><i class=\"far fa-star\"></i></button>\n      <input name=\"search\" type=\"text\" placeholder=\"Type location and press enter\">\n      <button class=\"icon-search\" type=\"submit\"><i class=\"fas fa-search\"></i></button>\n      <select id=\"units\">\n        <option value=\"GC\" selected>°C</option>\n        <option value=\"FA\">°F</option>\n      </select>\n    </form>\n    `;\n    console.log('render');\n    console.log(this.host.innerHTML);\n    return this.host;\n  }\n};\n\nexport default LocationSearch;\n","import LocationSearch from './components/LocationSearch';\n\nwindow.onload = () => {\n  // link.getLink();\n  // search.listenInput();\n  // history.renderFavorite();\n  // history.renderRecent();\n  // app.listenStar();\n  // app.listenCity(dom.favorite);\n  // app.listenCity(dom.recent);\n  // app.listenDay();\n  // link.popLink();\n\n  let form = new LocationSearch;\n  form.render();\n};\n\nconst api = {\n  baseUrl : 'https://api.weatherbit.io/v2.0/forecast/daily',\n  key : '?key=ddb43221d2a548889fb0e23b1266b34c',\n  days : '&days=7',\n  units : '&units=',\n  endpoint : '&city='\n};\n\nconst dom = {\n  star : document.getElementById('star'),\n  search : document.getElementById('search'),\n  units : document.getElementById('units'),\n  todayForecast : document.getElementById('today-forecast'),\n  weekForecast : document.getElementById('week-forecast'),\n  favorite : document.getElementById('favorite'),\n  recent : document.getElementById('recent')\n};\n\nlet app = {\n  city : '',\n  data : {},\n  get query() {\n    return api.baseUrl + api.key + api.days + api.units + units.getUnits() + api.endpoint + this.city;\n  },\n  getInput(input) {\n    this.city = input;\n    this.getForecast();\n  },\n  getForecast() {\n    fetch(this.query)\n      .then(response => this.handleErrors(response))\n      .then(data => {\n        this.data = data;\n        console.log(this.data);\n        this.processData();\n      })\n      .catch(err => console.log(err));       \n  },\n  handleErrors(response) {\n    if (!response.ok) {\n      throw Error(response.statusText);\n    }\n    return response.json();\n  },\n  processData() {\n    forecast.renderDayForecast(this.data, 0);\n    forecast.renderWeekForecast(this.data);\n    history.addToRecent(this.city);\n    history.renderRecent();\n    link.changeLink(this.city);\n  },\n  listenStar() {\n    dom.star.addEventListener('click', () => {\n      history.addToFavorite(this.city);\n      history.renderFavorite();\n    });\n  },\n  listenDay() {\n    dom.weekForecast.addEventListener('click', (e) => {\n      let target = e.target;\n      while (target != this) {\n        if (target.className == 'day-forecast') {\n          let day = target.id;\n          forecast.renderDayForecast(this.data, day);\n          return;\n        }\n        target = target.parentNode;\n      }\n    });\n  },\n  listenCity(list) {\n    list.addEventListener('click', (e) => {\n      let target = e.target;\n      while (target != this) {\n        if (target.tagName == 'LI') {\n          this.city = target.textContent;\n          this.getForecast();\n          return;\n        }\n        target = target.parentNode;\n      }\n    });\n  },\n  listenLink(city) {\n    this.city = city;\n    this.getForecast();\n  }\n};\n\nlet search = {\n  listenInput() {\n    dom.search.addEventListener('keypress', (e) => {\n      if (e.keyCode === 13) {\n        if (this.isInputEmpty()) return;\n        else {\n          app.getInput(dom.search.value);\n        }\n      }\n    });\n  },\n  isInputEmpty() {\n    if (dom.search.value.length === 0) return true;\n  }\n};\n\nlet forecast = {\n  renderDayForecast(forecast, day) {\n    dom.todayForecast.classList.add('active');\n    dom.todayForecast.innerHTML = '';\n    let html = `\n      <div class=\"city\">${forecast.city_name}, ${forecast.country_code}</div>\n      <div class=\"container\">\n        <div class=\"wrapper\">\n          <div class=\"current-day\">${this.getWeekday(forecast.data[day].datetime)}</div>\n          <time class=\"date\">${forecast.data[day].datetime}</time>\n          <div class=\"wind\">Wind ${forecast.data[day].wind_spd} ${units.getSpeedUnits()}</div>\n          <div class=\"humidity\"><i class=\"fas fa-tint\"></i> ${forecast.data[day].rh}%</div>\n        </div>\n        <div class=\"wrapper\">\n          <div>${this.drawIcon(forecast.data[day].weather.code)}</div>\n          <div class=\"weather\">${forecast.data[day].weather.description}</div>\n        </div>\n        <div class=\"wrapper\">\n          <div class=\"temperature\">\n            <div class=\"min_temperature\"><i class=\"fas fa-long-arrow-alt-down\"></i> ${forecast.data[day].min_temp}°</div>\n            <div class=\"max_temperature\"><i class=\"fas fa-long-arrow-alt-up\"></i> ${forecast.data[day].max_temp}°</div>\n          </div>\n          <div class=\"current-temperature\">${forecast.data[day].temp}°</div>\n        </div>\n      </div>\n    `;\n    dom.todayForecast.insertAdjacentHTML('beforeend', html);\n  },\n  renderWeekForecast(forecast) {\n    dom.weekForecast.classList.add('active');\n    dom.weekForecast.innerHTML = '';\n    for (let i = 0; i < 7; i++) {\n      let html = `\n        <div class=\"day-forecast\" id=\"${i}\">\n          <div class=\"day\">${this.getShortWeekday(forecast.data[i].datetime)}</div>\n          <div>${this.drawIcon(forecast.data[i].weather.code)}</div>\n          <div class=\"temperature\">${forecast.data[i].temp}°</div>\n        </div>\n      `;\n      dom.weekForecast.insertAdjacentHTML('beforeend', html);\n    };\n  },\n  getWeekday(datetime) {\n    let weekday = ['Sunday', 'Monday', 'Tuesday', 'Wednesday', 'Thursday', 'Friday', 'Saturday'];\n    let date = new Date(datetime);\n    return weekday[date.getDay()];\n  },\n  getShortWeekday(datetime) {\n    let weekday = ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'];\n    let date = new Date(datetime);\n    return weekday[date.getDay()];\n  },\n  drawIcon(weatherCode) {\n    let icon = '';\n    switch(weatherCode) {\n      case '200':\n      case '201':\n      case '202':\n      case '230':\n      case '231':\n      case '232':\n      case '233':\n        icon = 'thunder';\n        break;\n      case '300':\n      case '301':\n      case '302':\n      case '611':\n      case '612':\n        icon = 'rainy-7';\n        break;\n      case '500':\n      case '520':\n        icon = 'rainy-4';\n        break;\n      case '501':\n      case '511':\n        icon = 'rainy-5';\n        break;\n      case '502':\n      case '522':\n      case '900':\n        icon = 'rainy-6';\n        break;\n      case '521':\n        icon = 'rainy-3';\n        break;\n      case '600':\n      case '610':\n      case '621':\n        icon = 'snowy-3';\n        break;\n      case '601':\n        icon = 'snowy-5';\n        break;\n      case '602':\n      case '622':\n      case '623':\n        icon = 'snowy-6';\n        break;\n      case '700':\n      case '711':\n      case '721':\n      case '731':\n      case '741':\n      case '751':\n        icon = 'cloudy-day-1';\n        break;\n      case '800':\n        icon = 'day';\n        break;\n      case '801':\n      case '802':\n      case '803':\n        icon = 'cloudy-day-2';\n        break;\n      case '804':\n        icon = 'cloudy';\n        break;\n    };\n    return '<img src=\"img/' + icon + '.svg\">';\n  }\n};\n\nlet units = {\n  isCelciusSelected() {\n    let value = dom.units.options[dom.units.selectedIndex].value;\n    if (value === 'GC') return true;\n    else return false;\n  },\n  getUnits() {\n    if (this.isCelciusSelected()) return 'M';\n    else return 'I';\n  },\n  getSpeedUnits() {\n    if (this.isCelciusSelected()) return 'm/s';\n    else return 'mph';\n  }\n};\n\nlet history = {\n  get recentCities() {\n    return localStorage.getItem('recentCities') ? JSON.parse(localStorage.getItem('recentCities')) : [];\n  },\n  get favoriteCities() {\n    return localStorage.getItem('favoriteCities') ? JSON.parse(localStorage.getItem('favoriteCities')) : [];\n  },\n  addToRecent(city) {\n    let arr = this.addToArray(this.recentCities, city);\n    localStorage.setItem('recentCities', JSON.stringify(arr));\n  },\n  addToFavorite(city) {\n    let arr = this.addToArray(this.favoriteCities, city);\n    localStorage.setItem('favoriteCities', JSON.stringify(arr));\n  },\n  renderRecent() {\n    this.renderList(this.recentCities, dom.recent);\n  },\n  renderFavorite() {\n    this.renderList(this.favoriteCities, dom.favorite);\n  },\n  renderList(list, parent) {\n    parent.innerHTML = '';\n    list.forEach((item) => {\n      let html = `<li>${item}</li>`;\n      parent.insertAdjacentHTML('beforeend', html);   \n    });    \n    parent.parentElement.classList.add('active');\n  },\n  addToArray(arr, city) {\n    arr.push(city);\n    arr = [...new Set(arr)];\n    if (arr.length === 11) arr.shift();\n    return arr;\n  }\n};\n\nlet link = {\n  changeLink(city) {\n    window.history.pushState(city, null, '?' + city);\n  },\n  popLink() {\n    window.addEventListener('popstate', (e) => {\n      if (e.state !== null) app.listenLink(e.state);\n    });\n  },\n  getLink() {\n    let search = window.location.search;\n    if (search.length > 1) app.listenLink(search.substring(1));\n  }\n};\n"]}